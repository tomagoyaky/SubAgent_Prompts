# Auto Agent 项目介绍

## 项目概述

Auto Agent 是一个基于 LLM（大型语言模型）的智能代理系统，旨在通过集成多种 AI 模型和工具，提供专业的自动化任务处理能力。项目采用了模块化设计，支持多种 LLM 提供商，具备工具调用、子代理管理、长期记忆等高级功能。

## 项目结构

```
auto_agent/
├── app/                    # 主应用目录
│   ├── agents/             # 代理相关模块
│   │   ├── backends/       # 后端存储实现
│   │   │   └── basic_backend.py
│   │   ├── interrupt/      # 中断处理
│   │   │   └── basic_interrupt.py
│   │   ├── mcps/           # MCP 模块
│   │   │   └── basic_mcp.py
│   │   ├── memory/         # 内存管理
│   │   │   └── basic_memory.py
│   │   ├── middleware/     # 中间件
│   │   │   └── basic_middleware.py
│   │   ├── skills/         # 技能模块
│   │   │   └── basic_skill.py
│   │   ├── storage/        # 存储管理
│   │   │   └── basic_storage.py
│   │   ├── tools/          # 工具集
│   │   │   └── basic_tool.py
│   │   └── basic_agent.py  # 基础代理实现
│   ├── llms/               # LLM 提供者模块
│   │   ├── basic_provider.py     # 基础提供者抽象类
│   │   ├── claude_provider.py    # Claude 提供者
│   │   ├── deepseek_provider.py  # DeepSeek 提供者
│   │   ├── doubao_provider.py    # 豆包提供者
│   │   ├── glm_provider.py       # GLM 提供者
│   │   ├── gpt_provider.py       # GPT 提供者
│   │   ├── kimi_provider.py      # Kimi 提供者
│   │   ├── minipro_provider.py   # MiniPro 提供者
│   │   ├── ollama_provider.py    # Ollama 提供者
│   │   ├── provider_factory.py   # 提供者工厂
│   │   └── qwen_provider.py      # Qwen 提供者
│   ├── tests/              # 测试模块
│   │   ├── test_basic_agent.py
│   │   ├── test_basic_backend.py
│   │   ├── test_basic_interrupt.py
│   │   ├── test_basic_middleware.py
│   │   ├── test_basic_skill.py
│   │   ├── test_basic_tool.py
│   │   ├── test_config.py
│   │   ├── test_llm_providers.py
│   │   └── test_utils.py
│   ├── utils/              # 工具类
│   │   ├── base64_utils.py
│   │   ├── crypto_utils.py
│   │   ├── email_utils.py
│   │   ├── file_utils.py
│   │   ├── http_utils.py
│   │   ├── json_utils.py
│   │   ├── logger.py
│   │   ├── random_utils.py
│   │   ├── string_utils.py
│   │   └── time_utils.py
│   ├── config.py           # 配置管理
│   └── main.py             # 主应用入口
├── docs/                   # 文档目录
│   ├── CustomizeDeepAgents.md
│   ├── deepagents.py.md
│   ├── human-in-the-loop.md
│   ├── long-term-memory.md
│   └── 产品文档.md
├── skills/                 # 技能目录
│   └── skill-creator/      # 技能创建器
├── .env.template           # 环境变量模板
├── .gitignore              # Git 忽略文件
├── LICENSE.txt             # 许可证
├── README.md               # 项目说明
├── config.yaml             # 配置文件
├── requirements.txt        # 依赖包
├── run.py                  # 运行脚本
└── start.sh                # 启动脚本
```

## 核心文件功能说明

### 根目录文件

#### run.py
- **功能**：项目主入口脚本
- **定位**：作为整个系统的启动点，负责调用 main 函数并处理异常
- **特点**：包含异常处理逻辑，支持键盘中断优雅退出

#### requirements.txt
- **功能**：定义项目依赖包
- **定位**：确保项目在不同环境中能够正确安装所需依赖

#### config.yaml
- **功能**：存储项目配置信息
- **定位**：提供系统级配置，包括 LLM 设置、环境配置等

### app 目录文件

#### app/main.py
- **功能**：主应用逻辑实现
- **定位**：负责初始化应用、创建 LLM 提供者、启动代理
- **核心函数**：
  - `initialize_llm_provider()`: 初始化 LLM 提供者实例
  - `main()`: 主函数，协调各组件启动

#### app/config.py
- **功能**：配置管理
- **定位**：统一管理项目配置，支持从 YAML 文件和环境变量加载配置
- **核心功能**：
  - 配置加载与合并
  - 环境变量映射
  - 配置访问接口

#### app/agents/basic_agent.py
- **功能**：基础代理实现
- **定位**：作为所有代理的基类，提供核心代理功能
- **核心功能**：
  - 创建深度代理实例
  - 线程管理
  - 输入验证
  - 代理信息获取

### LLM 提供者模块

#### app/llms/provider_factory.py
- **功能**：LLM 提供者工厂
- **定位**：根据提供者名称创建相应的 LLM 提供者实例
- **核心功能**：
  - 提供者注册与管理
  - 动态创建提供者实例
  - 提供者可用性检查

#### app/llms/basic_provider.py
- **功能**：LLM 提供者抽象基类
- **定位**：定义所有 LLM 提供者必须实现的接口
- **核心方法**：
  - `_create_llm()`: 创建 LLM 实例
  - `_generate()`: 生成响应
  - `_stream()`: 流式生成响应
  - `chat()`: 聊天接口

#### app/llms/deepseek_provider.py
- **功能**：DeepSeek LLM 提供者实现
- **定位**：封装 DeepSeek 模型的访问接口
- **特点**：使用 ChatOpenAI 实现与 DeepSeek API 的交互

### 工具模块

#### app/agents/tools/basic_tool.py
- **功能**：工具系统实现
- **定位**：提供各种工具供代理使用
- **核心工具**：
  - 文件操作工具（列出、读取、写入、编辑文件）
  - 网络搜索工具
  - 命令执行工具
  - Python 脚本执行工具

### 工具类模块

#### app/utils/logger.py
- **功能**：日志系统
- **定位**：提供统一的日志记录功能
- **特点**：支持控制台和文件日志，可配置日志级别

## 核心功能模块

### 1. 代理系统

代理系统是项目的核心，通过 `BasicAgent` 类实现。代理系统支持：
- 线程化运行
- 工具调用
- 子代理管理
- 长期记忆
- 流式响应

### 2. LLM 提供者系统

LLM 提供者系统负责与各种 AI 模型交互，通过工厂模式实现：
- 支持多种模型提供商（OpenAI、DeepSeek、Claude 等）
- 统一的接口设计
- 动态提供者创建
- 配置驱动的模型选择

### 3. 工具系统

工具系统为代理提供了扩展能力，包括：
- 文件操作
- 网络搜索
- 命令执行
- Python 脚本运行

### 4. 配置系统

配置系统提供了灵活的配置管理能力：
- YAML 文件配置
- 环境变量覆盖
- 环境特定配置
- 统一的配置访问接口

### 5. 日志系统

日志系统确保系统运行状态可追踪：
- 多级别日志（debug、info、warning、error）
- 控制台和文件输出
- 结构化日志格式

## 技术栈

- **Python 3.8+**：核心编程语言
- **DeepAgents**：深度代理框架
- **LangChain**：LLM 应用框架
- **LangGraph**：代理编排框架
- **YAML**：配置文件格式
- **dotenv**：环境变量管理
- **Threading**：并发处理

## 工作流程

1. **初始化**：加载配置，创建必要目录
2. **LLM 提供者创建**：根据配置初始化 LLM 提供者
3. **代理创建**：创建基础代理实例
4. **代理启动**：启动代理线程，处理用户输入
5. **响应生成**：通过 LLM 生成响应，支持流式输出
6. **任务完成**：代理执行完成，记录结果

## 配置说明

项目配置主要通过 `config.yaml` 文件和环境变量管理：

- **LLM 配置**：模型选择、API 密钥、参数设置
- **环境配置**：开发、测试、生产环境区分
- **目录配置**：工作目录、日志目录等

## 扩展能力

项目设计支持以下扩展：

1. **新增 LLM 提供者**：通过继承 `BasicProvider` 实现
2. **新增工具**：通过装饰器 `@tool` 定义新工具
3. **新增技能**：在 skills 目录下创建新技能
4. **自定义后端**：实现自定义存储后端

## 总结

Auto Agent 项目是一个功能完整、架构清晰的智能代理系统，通过模块化设计和灵活配置，为各种自动化任务提供了强大的支持。项目支持多种 LLM 提供商，具备丰富的工具集和扩展能力，可根据具体需求进行定制和扩展。

---

**项目状态**：活跃开发中
**最后更新**：2026-02-06
