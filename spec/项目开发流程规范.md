# 项目开发技术流程规范（AI Agent 协作版）

## 1. 总则

### 1.1 目的

为规范 AI Agent（测试、产品、后端、架构师、前端、运维、运营）与技术人员协同参与的项目开发全流程，明确技术各阶段人工与 Agent 的职责分工、输出物及交付标准，降低技术开发风险，保障代码质量、系统稳定性及可维护性，提升协同开发效率，协调各技术岗位与 7 类 AI Agent 的协作衔接，特制定本规范。

本规范适用于公司所有该 7 类 AI Agent 协同参与的项目技术开发环节，所有参与技术开发的相关人员及 AI Agent 运维管理人员均需严格遵守。

### 1.2 核心技术原则（含 AI Agent 协作要求）

1. **架构先行**：技术开发前需完成架构设计及评审，架构师 AI Agent 可辅助架构推演，但无合理人工评审通过的架构设计，不启动编码。

2. **规范编码**：前端、后端 AI Agent 辅助编码时需加载公司编码规范插件，人工开发及 Agent 生成代码均需严格遵循公司编码规范，确保代码可读性、可复用性、可维护性，人工对所有 Agent 生成代码进行最终审核。

3. **测试闭环**：所有编码完成的功能（含前端、后端 Agent 生成代码）需经过完整测试，人工测试与测试 AI Agent 自动化测试协同，缺陷未闭环不进入下一环节。

4. **安全可控**：全程考虑系统安全，人工排查核心安全隐患，后端、运维、测试 AI Agent 协同辅助扫描代码漏洞、权限异常，共同规避数据泄露、权限混乱等安全风险。

5. **可追溯性**：技术设计文档、代码修改记录（含各类 AI Agent 生成痕迹）、测试报告、部署日志等均需留存，所有 AI Agent 生成的中间文件同步归档，便于后续问题排查及复盘。

6. **协同闭环**：明确各阶段 7 类 AI Agent 与人工的协作边界，Agent 完成辅助任务后需触发人工校验，校验通过方可进入下一环节，杜绝 Agent 自主推进未校验任务。

### 1.3 适用范围

本规范适用于公司所有 7 类 AI Agent（测试、产品、后端、架构师、前端、运维、运营）协同参与的项目技术开发全流程，涵盖技术架构设计、编码开发、代码评审、测试验证、部署上线、运维监控及技术归档等核心环节，涉及前端开发工程师、后端开发工程师、测试工程师、运维工程师、技术负责人、AI Agent 运维管理员，以及参与协作的 7 类 AI Agent。

---

## 2. 技术架构设计阶段

**（AI Agent 协作重点：架构师 Agent 主导辅助，产品、后端 Agent 协同）**

### 2.1 阶段目的

基于评审通过的产品需求，由技术人员主导、架构师 AI Agent 核心辅助，产品、后端 AI Agent 协同，设计合理、可行、可扩展的技术架构，明确技术选型、系统分层、模块划分、数据库设计及接口规范，为后续编码开发提供清晰指导，规避技术瓶颈，提升架构设计效率。

### 2.2 责任人

- **主导**：技术负责人、前端研发负责人、后端研发负责人、数据库工程师
- **协同**：AI Agent 运维管理员（负责 Agent 调度）
- **参与 Agent**：架构师 Agent（核心）、产品 Agent、后端 Agent

### 2.3 核心流程

1. **需求研读**：技术负责人组织核心技术人员，深入研读评审通过的产品需求文档及原型；产品 Agent 同步加载需求文档，提取业务核心诉求和边界条件，生成需求解析摘要；架构师 Agent 结合需求摘要，提炼技术关键点，辅助人工快速梳理核心技术诉求和难点。

2. **技术选型**：技术人员结合需求特点、公司技术栈规范及行业最佳实践，确定核心技术选型方向；架构师 Agent 辅助筛选适配的技术方案、版本号及适用场景，排查小众、不稳定、无维护支持的技术，生成选型对比报告；后端 Agent 同步校验技术选型与后端开发适配性，供人工决策。

3. **架构设计**：技术人员主导绘制系统整体架构图、模块划分图等核心图表；架构师 Agent 辅助推演架构合理性，模拟不同场景下的架构运行状态，排查潜在瓶颈，提出优化建议，人工评估后整合完善；后端 Agent 辅助补充后端模块分层及交互逻辑建议。

4. **细节设计**：技术人员细化各模块技术实现方案，明确关键算法、异常处理机制等；架构师 Agent 辅助补充细节设计（如异常场景枚举、权限控制逻辑初稿），后端 Agent 协同完善数据库交互及接口实现初步方案，人工审核修改。

5. **架构评审**：技术负责人组织技术团队及项目经理开展架构评审；架构师 Agent 同步展示架构推演数据、优化建议记录；产品 Agent 辅助校验架构设计与产品需求的匹配度；后端 Agent 补充后端技术落地可行性说明，辅助评审讨论，重点审核架构合理性、技术选型可行性，记录评审意见并修改完善。

6. **文档定稿**：架构修改完善后，人工定稿《技术架构设计说明书》等核心文档；架构师 Agent 辅助规范文档格式、补充文档注释；后端、前端 Agent 同步校验文档中接口规范、模块划分的适配性；文档分发至所有技术开发人员及 Agent 运维管理员，作为编码开发及 Agent 配置的核心依据。

### 2.4 输出物

- 《技术架构设计说明书》
- 《数据库设计说明书》
- 《接口规范文档》
- 系统架构图
- 数据库 ER 图
- 接口交互图
- 架构师 Agent 架构推演报告及优化建议记录
- 产品 Agent 需求解析摘要
- 后端 Agent 技术适配校验报告
- Agent 配置参数清单

### 2.5 注意事项

1. 技术选型需兼顾可行性与扩展性，架构师、后端 Agent 提供的选型方案需经人工严格审核，避免过度依赖 Agent 推荐，同时考虑团队技术储备及 Agent 适配性，降低开发成本。

2. 数据库设计需遵循三大范式，架构师、后端 Agent 辅助设计索引、字段类型后，人工需排查数据冗余、查询低效等问题，确保设计合理。

3. 接口规范需明确统一，人工制定核心规则后，后端、前端 Agent 协同辅助校验前后端接口一致性，避免规范冲突。

4. 架构评审需以人工决策为主，架构师、产品、后端 Agent 提供的推演数据及建议仅作为参考，重点关注技术难点的解决方案，确保架构可落地、无重大隐患。

5. 架构设计阶段的所有 Agent 配置参数需同步归档，后续 Agent 协作需基于该参数开展，避免配置偏差。

---

## 3. 编码开发阶段

**（AI Agent 协作重点：前端、后端 Agent 核心辅助，测试 Agent 协同校验）**

### 3.1 阶段目的

依据技术架构设计文档及接口规范，由技术人员主导、前端、后端 AI Agent 核心辅助，测试 Agent 协同校验，严格遵循编码规范，高效、高质量完成各模块编码开发，实现产品需求中的所有功能，确保代码可复用、可维护，减少人工重复编码工作量。

### 3.2 责任人

- **主导**：前端开发工程师、后端开发工程师、数据库工程师
- **监督**：技术负责人
- **协同**：AI Agent 运维管理员（负责 Agent 调度及规范配置）
- **参与 Agent**：前端 Agent、后端 Agent（核心）、测试 Agent

### 3.3 核心流程

1. **任务拆分**：技术负责人根据架构设计及模块划分，将编码任务拆分至每位开发人员，明确任务范围、完成时限及质量要求；后端、前端 Agent 辅助同步任务拆解清单，关联至对应开发人员及 Agent 账号，标注任务技术难点。

2. **环境搭建**：开发人员搭建本地开发环境、测试环境（联调专用），AI Agent 运维管理员配置前端、后端 Agent 的环境参数，确保开发环境、Agent 运行环境与架构设计中指定的技术版本一致，规避环境差异导致的问题。

3. **编码实现**：开发人员主导编码开发，优先复用现有公共组件、工具类；前端 Agent 辅助生成前端页面模板、交互逻辑代码，后端 Agent 辅助生成后端接口、工具类、数据库交互代码，两者均加载公司编码规范插件，实时校验代码规范并提示修改；开发人员对 Agent 生成的代码进行审核、修改、完善，确保符合架构设计要求。

4. **本地测试**：开发人员完成单个功能或模块编码后，进行本地自测（单元测试、接口自测）；测试 Agent 辅助执行自动化单元测试，生成测试结果报告，提示潜在代码漏洞及规范问题，开发人员结合报告修复自身发现的问题。

5. **代码提交**：开发人员将自测通过的代码（含审核通过的前端、后端 Agent 生成代码），按规范提交至代码仓库（如 Git），提交时填写清晰的提交备注；后端、前端 Agent 协同辅助校验代码提交格式，拦截不符合规范的提交（如未填写备注、代码未通过规范校验），记录提交痕迹（含 Agent 生成代码标识）。

6. **联调测试**：前后端开发人员配合，开展接口联调测试；前端、后端 Agent 协同模拟接口请求、返回异常场景，排查接口交互中的问题（如参数不匹配、数据返回异常等），记录联调问题清单；测试 Agent 辅助校验联调结果，辅助开发人员快速定位解决，确保模块间交互顺畅。

7. **进度同步**：开发人员每日同步编码进度，后端、前端 Agent 辅助统计各任务完成进度、Agent 辅助编码工作量，同步至技术负责人；开发人员遇到技术难点、需求疑问及时反馈，技术负责人协调解决，避免延误整体进度。

### 3.4 输出物

- 可运行的代码（提交至代码仓库，含审核通过的前端、后端 Agent 生成代码）
- 单元测试用例及报告（含测试 Agent 自动化测试报告）
- 接口联调测试记录（含前端、后端 Agent 模拟测试数据）
- 本地测试报告
- 代码提交痕迹记录（含 Agent 生成标识）

### 3.5 注意事项

1. 严禁违反编码规范，前端、后端 Agent 生成的代码需经人工 100% 审核，严禁直接提交未审核的 Agent 代码，严禁编写冗余、混乱、无注释的代码，严禁硬编码敏感信息（如密码、密钥等）。

2. 单元测试覆盖率需达到指定标准（如核心代码覆盖率≥80%），测试 Agent 辅助完成自动化测试后，人工需补充核心逻辑的手动测试，确保核心逻辑无漏洞。

3. 代码提交需遵循分支管理规范，前端、后端 Agent 辅助拦截违规提交，但人工需对提交内容的准确性、完整性负责，禁止直接向主分支提交代码。

4. 联调过程中发现的问题，开发人员及时沟通解决，前端、后端、测试 Agent 协同记录问题及解决方案，做好可追溯，避免问题遗留。

5. 编码过程中若需修改架构设计或接口规范，需提交变更申请，经技术负责人及相关人员评审通过后，同步更新前端、后端、架构师 Agent 配置参数，方可修改编码。

6. 前端、后端 Agent 辅助编码时，需关闭无关功能插件，避免生成冗余、不符合项目需求的代码，Agent 运行异常时，开发人员及时反馈给 AI Agent 运维管理员处理。

---

## 4. 代码评审阶段

**（AI Agent 协作重点：后端、前端、测试 Agent 协同初筛，架构师 Agent 辅助评审）**

### 4.1 阶段目的

通过前端、后端、测试 AI Agent 协同初筛、人工交叉评审、架构师 Agent 辅助评审的方式，检查代码质量、编码规范符合性、架构设计落地情况，发现编码中的漏洞、冗余及可优化点，减轻人工评审工作量，确保代码质量达标，减少后续测试及线上故障。

### 4.2 责任人

- **组织**：技术负责人
- **评审**：代码评审人（开发骨干）
- **执行**：编码开发人员
- **协同**：AI Agent 运维管理员
- **参与 Agent**：后端 Agent、前端 Agent、测试 Agent（初筛核心）、架构师 Agent（评审辅助）

### 4.3 核心流程

1. **评审发起**：开发人员完成模块编码及本地自测、联调测试后，向技术负责人提交代码评审申请，明确评审范围、代码分支及需重点关注的内容；前端、后端、测试 Agent 同步接收申请，自动加载对应代码分支，完成初步校验。

2. **评审分配**：技术负责人分配评审人（原则上为非编码本人的开发骨干），明确评审时限及评审标准；AI Agent 运维管理员配置各参与 Agent 的评审参数（贴合公司规范），Agent 同步将初筛报告发送至评审人。

3. **Agent 初筛**：前端、后端 Agent 对照编码规范、架构设计文档、接口规范，对代码进行全面初筛，重点检查编码规范符合性、简单逻辑错误、代码冗余；测试 Agent 同步扫描代码漏洞、敏感信息泄露风险，生成初筛报告（标注问题等级、位置及修改建议）。

4. **人工评审**：评审人结合前端、后端、测试 Agent 初筛报告，对代码进行逐行或重点评审，重点关注核心逻辑、安全隐患、架构落地情况；架构师 Agent 辅助评审架构落地合理性，补充 Agent 未识别的隐性问题，记录评审问题（分为致命问题、严重问题、一般问题、优化建议）。

5. **问题整改**：开发人员根据各 Agent 初筛建议及人工评审意见，逐一整改问题，整改完成后提交复审申请；前端、后端、测试 Agent 对整改后的代码进行二次初筛，确认基础问题已整改；若对评审意见有异议，可与评审人、技术负责人沟通确认。

6. **复审通过**：评审人对整改后的代码及 Agent 二次初筛报告进行复审，确认所有致命、严重问题已整改完毕，一般问题及优化建议可根据实际情况协商处理，复审通过后，代码方可进入测试阶段；若复审未通过，返回开发人员继续整改。

7. **评审归档**：技术负责人收集所有代码评审记录、整改记录、各 Agent 初筛及二次校验报告，归档至项目技术文档中，便于后续追溯；AI Agent 运维管理员同步归档各 Agent 评审参数及运行日志。

### 4.4 输出物

- 《代码评审记录表》
- 《代码整改报告》
- 复审记录
- 前端/后端/测试 Agent 代码初筛报告
- 架构师 Agent 评审辅助意见
- Agent 评审参数及运行日志

### 4.5 注意事项

1. 评审人需认真负责，严禁依赖各 Agent 初筛而走过场，重点关注核心逻辑、安全隐患及编码规范符合性，Agent 未识别的隐性问题需人工排查。

2. 致命问题（如导致系统崩溃、功能无法实现、数据泄露）必须 100% 整改，前端、后端、测试 Agent 二次初筛需重点校验此类问题，否则禁止进入下一阶段。

3. 代码评审需在规定时限内完成，各 Agent 初筛可提前并行开展，提升评审效率，避免延误项目进度。

4. 评审过程中需保持沟通顺畅，开发人员对 Agent 初筛建议有疑问时，可咨询 AI Agent 运维管理员，避免因 Agent 误判导致整改偏差。

5. 前端、后端、测试 Agent 的规范参数需及时更新，与公司编码规范保持一致，避免初筛标准偏差。

---

## 5. 测试验证阶段

**（AI Agent 协作重点：测试 Agent 核心主导，产品、前端、后端 Agent 协同）**

### 5.1 阶段目的

通过测试 AI Agent 核心主导自动化测试，产品、前端、后端 AI Agent 协同，结合人工测试，全面验证系统功能、性能、兼容性、安全性及易用性，高效发现系统中的缺陷并督促整改，减轻人工测试工作量，确保系统符合产品需求及技术质量标准，具备上线条件。

### 5.2 责任人

- **主导**：测试工程师
- **配合**：开发工程师（配合整改）、产品经理（配合验收测试）
- **监督**：技术负责人
- **协同**：AI Agent 运维管理员
- **参与 Agent**：测试 Agent（核心）、产品 Agent、前端 Agent、后端 Agent

### 5.3 核心流程

1. **测试计划制定**：测试工程师根据产品需求文档、技术架构设计文档，制定《测试计划》，明确测试范围、测试类型、测试环境、测试时限及验收标准；产品 Agent 辅助梳理测试要点，结合业务需求生成测试范围初稿；测试 Agent 辅助补充测试类型及测试重点，供测试工程师完善。

2. **测试用例设计**：测试工程师基于测试计划及需求细节，设计完整的测试用例（覆盖正常场景、异常场景、边界场景）；测试 Agent 辅助生成基础测试用例、异常场景用例；产品 Agent 辅助校验测试用例与产品需求的匹配度；前端、后端 Agent 辅助补充接口测试、页面交互测试用例，测试工程师审核、补充、优化后，提交测试负责人评审；评审通过后，定稿《测试用例集》，同步导入测试 Agent。

3. **测试环境准备**：运维工程师配合测试工程师，搭建专用测试环境（与生产环境配置一致），部署待测试版本代码；AI Agent 运维管理员配置测试 Agent 的环境参数，前端、后端 Agent 协同校验测试环境与开发环境的一致性，确保测试 Agent 可正常访问测试环境，与测试环境同步联动。

4. **自动化测试**：测试 Agent 加载测试用例集，批量执行功能测试、兼容性测试，实时记录测试结果，生成自动化测试报告，标注未通过用例及复现步骤；前端 Agent 辅助校验前端页面兼容性及交互效果，后端 Agent 辅助校验后端接口性能及异常处理，共同补充测试 Agent 未覆盖的测试场景。

5. **人工测试**：测试工程师重点审核自动化测试未覆盖的核心场景、复杂逻辑场景，开展手动测试，补充各 Agent 未识别的缺陷；安全测试以人工排查为主，测试、后端 Agent 辅助扫描安全漏洞，共同完成安全测试，记录发现的缺陷。

6. **缺陷跟踪**：测试工程师将所有缺陷（含各 Agent 发现及人工发现）录入缺陷管理工具；测试 Agent 同步关联缺陷与测试用例、代码提交记录，实时跟踪缺陷状态（未整改、整改中、已整改、已关闭），向开发工程师及前端、后端 Agent 推送缺陷提醒，避免缺陷遗漏。

7. **缺陷整改与回归**：开发工程师及时查看缺陷管理工具中的缺陷，优先整改致命、严重缺陷，整改完成后提交回归测试申请；测试 Agent 自动执行回归测试用例，前端、后端 Agent 协同校验整改效果，生成回归测试报告；测试工程师对核心缺陷的整改效果进行人工复核，确认缺陷已闭环；未闭环的缺陷需持续跟踪整改。

8. **验收测试**：所有缺陷闭环后，测试工程师组织产品经理、开发人员开展验收测试；测试 Agent 辅助展示自动化测试报告、缺陷闭环记录；产品 Agent 辅助校验系统功能与产品需求的一致性，测试工程师结合人工测试结果，验证系统是否满足产品需求及验收标准，形成《验收测试报告》；验收通过后，系统方可进入部署上线阶段；验收未通过，返回整改后重新测试。

9. **测试归档**：测试工程师收集所有测试文档（测试计划、测试用例、测试报告、缺陷记录、回归测试记录）；AI Agent 运维管理员归档测试、前端、后端、产品 Agent 测试参数、自动化测试日志；所有文档同步归档至项目技术文档。

### 5.4 输出物

- 《测试计划》
- 《测试用例集》
- 《功能测试报告》
- 《专项测试报告》（含性能、兼容性、安全）
- 《缺陷记录报告》
- 《验收测试报告》
- 各相关 Agent 自动化测试日志
- 缺陷跟踪记录
- 产品 Agent 需求匹配校验报告

### 5.5 注意事项

1. 测试用例需全面、细致，覆盖所有需求场景，各 Agent 生成的用例需经人工审核补充，避免遗漏关键功能及边界场景，确保自动化测试的覆盖率。

2. 缺陷记录需清晰、准确，测试 Agent 关联缺陷与相关记录时，人工需核对准确性，前端、后端 Agent 协同确认缺陷复现步骤，确保开发人员可快速复现并整改。

3. 性能测试、安全测试需制定明确的标准，测试、后端 Agent 生成的性能及安全数据需经人工分析，不达标不得进入上线阶段。

4. 回归测试需结合各 Agent 自动化测试与人工复核，避免整改一个缺陷引入新的缺陷，Agent 回归测试未通过的，需人工排查原因。

5. 验收测试需有产品经理参与，产品、测试 Agent 辅助展示测试成果，确保系统符合产品需求预期。

6. 测试 Agent 需定期校准，避免因环境变化、用例更新导致测试结果误判，Agent 运行异常时及时排查修复。

---

## 6. 部署上线阶段

**（AI Agent 协作重点：运维 Agent 核心主导，测试、前端、后端 Agent 协同）**

### 6.1 阶段目的

在确保系统测试通过、无重大缺陷的前提下，由运维工程师主导、运维 AI Agent 核心辅助，测试、前端、后端 AI Agent 协同，安全、平稳地将系统部署至生产环境，完成上线前的最终检查，自动化执行部署流程，实时监控部署状态，确保系统上线后正常运行，减少上线故障及人工操作失误。

### 6.2 责任人

- **主导**：运维工程师
- **配合**：技术负责人、开发工程师、测试工程师
- **协同**：AI Agent 运维管理员
- **参与 Agent**：运维 Agent（核心）、测试 Agent、前端 Agent、后端 Agent

### 6.3 核心流程

1. **上线准备**：运维工程师制定《部署上线计划》，明确上线时间、部署步骤、所需资源、回滚方案及责任人；开发工程师提交待上线版本代码（经测试通过、代码评审通过），并提供部署所需的配置文件、脚本等；测试工程师确认测试环境无未闭环缺陷，出具测试通过证明；AI Agent 运维管理员配置运维、测试、前端、后端 Agent 的参数，各 Agent 加载部署计划及回滚方案，完成部署前自检。

2. **生产环境检查**：运维工程师检查生产环境服务器、数据库、中间件等配置；运维 Agent 同步扫描生产环境状态，检查资源充足性（CPU、内存、磁盘等）、环境兼容性，生成环境检查报告；前端、后端 Agent 协同校验生产环境与开发环境的技术版本一致性，提醒运维工程师及时处理异常。

3. **数据备份**：运维工程师确认备份方案，运维 Agent 自动执行生产环境现有数据及代码备份，生成备份报告，运维工程师审核备份完整性，确保异常时可快速回滚；备份文件同步归档至指定位置。

4. **预部署验证**：运维工程师触发运维 Agent，在生产环境预部署待上线版本；运维 Agent 同步监控预部署过程，记录运行状态；测试、前端、后端 Agent 协同对预部署版本进行简单的功能验证及接口测试，确认部署成功、系统可正常启动，无明显异常。

5. **正式部署**：按照上线计划，运维工程师触发运维 Agent，Agent 自动执行部署脚本，批量完成待上线版本的正式部署，避免人工重复操作；运维 Agent 全程监控部署过程中的系统状态、日志输出，设置异常阈值，出现异常立即触发告警（推送至运维工程师、技术负责人），并暂停部署；前端、后端、测试 Agent 全程配合，及时处理部署过程中出现的接口、功能异常。

6. **上线后验证**：部署完成后，测试、前端、后端 Agent 协同，对生产环境系统进行核心功能、关键接口的验证；测试 Agent 辅助执行核心功能回归测试，前端 Agent 校验页面展示及交互，后端 Agent 校验接口响应及数据交互，生成上线后验证报告；确认系统运行正常、功能符合预期，无上线引入的新缺陷；产品经理可抽样验证核心业务场景。

7. **上线确认**：所有验证通过后，技术负责人、项目经理确认上线成功，运维 Agent 同步更新系统版本标识，切换至正常监控模式；若上线过程中出现重大异常，运维工程师立即触发回滚方案，运维 Agent 辅助恢复至上线前版本，前端、后端、测试 Agent 协同排查问题后重新部署。

8. **部署归档**：运维工程师整理部署上线日志、配置文件、回滚记录等；AI Agent 运维管理员归档各参与 Agent 部署参数、监控日志、备份报告；所有归档内容同步至项目技术文档，便于后续追溯。

### 6.4 输出物

- 《部署上线计划》
- 部署日志
- 回滚方案及记录
- 上线验证报告
- 生产环境备份文件及备份报告
- 各参与 Agent 部署参数
- 监控日志
- 环境检查报告

### 6.5 注意事项

1. 上线时间优先选择业务低峰期（如深夜、周末），减少上线对业务的影响；运维 Agent 需提前设置告警优先级，确保上线过程中的异常可快速推送至相关人员。

2. 上线前必须完成生产环境数据及代码备份，运维 Agent 生成的备份报告需经人工审核，确保备份可用，异常时可快速回滚，降低损失。

3. 部署过程中，运维 Agent 需全程在线，运维工程师重点关注核心指标，前端、后端 Agent 协同监控接口及页面状态，发现异常立即暂停部署，执行回滚方案，避免故障扩大。

4. 上线后验证需全面，重点关注核心功能及上线前整改的缺陷，各协同 Agent 辅助执行自动化验证，人工补充核心场景复核，避免出现上线故障。

5. 所有上线相关操作（含各 Agent 执行动作）需留存日志，便于后续问题排查及复盘；运维 Agent 的部署脚本需经人工审核，避免脚本错误导致部署失败。

---

## 7. 运维监控与迭代阶段

**（AI Agent 协作重点：运维 Agent 核心主导，测试、前端、后端、产品、运营 Agent 协同）**

### 7.1 阶段目的

系统上线后，由运维工程师主导、运维 AI Agent 核心辅助，测试、前端、后端、产品、运营 AI Agent 协同，实现 24 小时持续监控系统运行状态，快速发现并处理线上故障，减轻人工监控工作量，保障系统稳定运行；同时收集系统优化建议、运营数据反馈，配合完成技术迭代，提升系统性能及用户体验。

### 7.2 责任人

- **主导**：运维工程师
- **配合**：技术负责人、开发工程师（配合故障处理及迭代开发）、测试工程师（配合迭代测试）
- **协同**：AI Agent 运维管理员
- **参与 Agent**：运维 Agent（核心）、测试 Agent、前端 Agent、后端 Agent、产品 Agent、运营 Agent

### 7.3 核心流程

1. **日常监控**：运维工程师搭建完善的系统监控平台，运维 Agent 24 小时监控生产环境系统运行状态（CPU、内存、磁盘、网络、接口响应速度等）、数据库运行状态、日志输出，设置多级异常告警机制（如短信、邮件告警）；前端 Agent 辅助监控页面加载及交互状态，后端 Agent 辅助监控接口响应及数据库运行，测试 Agent 辅助扫描系统潜在漏洞；运营 Agent 实时收集系统运营数据（如访问量、功能使用率），生成运营数据简报，辅助运维工程师定位潜在问题。

2. **故障处理**：运维 Agent 收到异常告警或用户反馈的线上故障后，立即推送告警信息至运维工程师，同步提取故障相关日志、运行数据，初步定位故障范围；前端、后端 Agent 协同排查接口、页面及代码层面的异常，测试 Agent 辅助复现故障场景；运维工程师排查故障原因，若为代码缺陷，通知开发工程师紧急整改；整改完成后，运维 Agent 快速部署修复版本，测试 Agent 验证修复效果；全程记录故障处理过程、原因及解决方案，形成《线上故障处理报告》，所有相关 Agent 同步归档故障相关数据，便于后续复盘。

3. **日常维护**：运维工程师定期对生产环境进行维护，制定维护计划；运维 Agent 辅助执行常规维护任务（如日志清理、系统补丁更新提醒、数据库备份校验），生成日常维护报告；前端、后端 Agent 协同校验系统运行稳定性，辅助处理简单的环境适配问题；运维工程师重点处理各 Agent 无法完成的复杂维护工作（如资源扩容、环境优化），确保系统长期稳定运行。

4. **迭代准备**：技术负责人收集系统运行中的优化建议、产品迭代需求，结合现有系统架构，制定技术迭代方案；产品 Agent 辅助梳理迭代需求，关联现有业务场景，生成需求优先级报告；运营 Agent 提供运营数据支撑，明确迭代优化方向；架构师 Agent 辅助评估迭代方案的架构适配性，后端、前端 Agent 辅助分析迭代开发难度，辅助技术负责人明确迭代范围、开发时限及责任人。

5. **迭代开发与测试**：开发工程师按照迭代方案，开展迭代编码开发，前端、后端 Agent 同步辅助，遵循编码规范及代码评审流程；测试 Agent 同步开展迭代测试，产品 Agent 辅助校验迭代功能与产品需求的一致性，提升测试效率。

6. **迭代上线**：迭代功能测试通过后，按照部署上线流程，运维工程师主导、运维 Agent 核心辅助，测试、前端、后端 Agent 协同，完成迭代版本的上线部署，上线后进行验证，确保迭代功能正常运行，不影响原有系统功能。

7. **迭代归档**：整理迭代开发相关文档（技术设计文档、代码评审记录、测试报告、部署日志等）；AI Agent 运维管理员归档各参与 Agent 迭代辅助日志、测试日志、部署日志，所有文档同步归档至项目技术文档。

### 7.4 输出物

- 系统监控日志
- 运营数据简报
- 《线上故障处理报告》
- 日常维护记录
- 技术迭代方案
- 迭代需求优先级报告
- 迭代开发及测试相关文档
- 迭代部署日志
- 各相关 Agent 运维日志

### 7.5 注意事项

1. 运维 Agent 需 24 小时在线，异常告警需分级推送，核心故障优先推送至相关责任人，避免故障扩大；各协同 Agent 告警阈值需定期校准，减少误告警、漏告警。

2. 线上故障处理需遵循"快速定位、快速整改、快速验证"的原则，各协同 Agent 辅助提取故障数据、排查异常，人工主导故障定位及整改，优先保障核心业务正常运行。

3. 数据库备份需定期执行，运维 Agent 生成的备份报告需经人工审核，备份文件需妥善保管，确保可正常恢复。

4. 技术迭代需兼顾系统兼容性，架构师、前端、后端 Agent 协同分析兼容性风险，人工审核确认，避免迭代版本与原有系统冲突；运营、产品 Agent 提供的迭代建议需结合技术可行性，确保迭代可落地。

5. 所有故障处理、日常维护、迭代开发相关记录（含各 Agent 生成记录）均需留存，便于后续复盘及系统优化；所有 Agent 需定期进行版本更新、功能校准，确保辅助效果。

---

## 8. 技术文档归档阶段

**（AI Agent 协作重点：运维 Agent 主导辅助，各相关 Agent 协同）**

### 8.1 阶段目的

项目上线稳定运行后，或项目迭代完成后，由技术负责人组织、运维 AI Agent 核心辅助，各相关 AI Agent 协同，将所有技术相关文档、代码、日志等进行统一整理、分类、归档，自动化完成文档排序、命名规范校验，便于后续项目复盘、问题排查、知识传承及系统维护，提升归档效率。

### 8.2 责任人

- **组织**：技术负责人
- **配合**：各技术岗位人员（配合提交）
- **协同**：AI Agent 运维管理员
- **参与 Agent**：运维 Agent（核心）、前端 Agent、后端 Agent、测试 Agent、产品 Agent

### 8.3 核心流程

1. **文档收集**：技术负责人组织各技术岗位人员，提交项目全流程中的所有技术文档、代码、日志等（包括架构设计文档、数据库设计文档、接口规范、代码评审记录、测试文档、部署日志、故障处理报告、迭代文档等）；AI Agent 运维管理员触发运维 Agent，自动抓取各阶段相关 Agent（前端、后端、测试、产品等）生成的中间文件、日志、报告，确保无遗漏。

2. **文档整理**：人工对收集的文档进行初步审核，确认完整性、准确性；运维 Agent 按照预设规则，对所有文档进行分类、排序，规范文档命名（贴合项目名称、文档类型、版本），校验文档格式，生成文档整理清单；前端、后端、测试、产品 Agent 协同校验对应模块文档的准确性，人工审核修改。

3. **归档存储**：人工确认整理后的文档清单，运维 Agent 自动将整理后的技术文档、代码（代码仓库归档）、日志等，存储至公司指定的归档位置（如共享服务器、文档管理平台）；Agent 同步设置访问权限，匹配不同岗位人员的访问范围，确保文档安全。

4. **归档确认**：技术负责人检查归档内容的完整性、准确性，运维 Agent 生成归档校验报告，确认所有文档均已正确归档；确认归档完成后，形成《技术文档归档报告》，提交至项目经理及公司相关部门备案。

5. **归档查询**：运维 Agent 搭建简易查询入口，支持按文档类型、关键词、版本等检索归档内容，前端、后端、测试、产品 Agent 协同关联对应模块文档，辅助技术人员快速查阅，提升知识复用效率。

### 8.4 输出物

- 完整的技术文档归档包（含分类目录）
- 《技术文档归档报告》
- 代码仓库归档记录
- 文档整理清单
- 归档校验报告
- 各相关 Agent 归档参数及运行日志

### 8.5 注意事项

1. 归档文档需完整、准确，人工需对核心文档进行审核，运维 Agent 抓取的各 Agent 生成文件需经对应模块 Agent 协同核对，无遗漏关键技术文档及记录。

2. 文档命名需规范，运维 Agent 按照预设规则规范命名后，人工需抽查校验，确保明确文档类型、项目名称及版本，便于快速查阅。

3. 归档内容需设置合理的访问权限，运维 Agent 设置权限后，人工需审核确认，确保技术信息安全，避免泄露。

4. 归档完成后，需留存归档记录及各 Agent 归档日志，便于后续查阅及追溯；运维 Agent 的分类规则、命名规则需与公司文档管理规范保持一致，定期更新。

---

## 9. AI Agent 运维管理补充规范（适配 7 类 Agent）

### 9.1 Agent 账号与权限管理

AI Agent 运维管理员负责统一管理 7 类 AI Agent 的账号、权限，根据项目需求及各 Agent 职责，分配对应操作权限（如运维 Agent 可操作部署及备份，测试 Agent 仅可操作测试相关功能），禁止所有 Agent 拥有超出协作范围的权限（如核心数据修改、未授权部署等），定期排查权限异常，留存权限变更记录。

### 9.2 Agent 参数配置与更新

7 类 AI Agent 的参数配置需经技术负责人审核，与项目技术规范、公司标准保持一致；当公司编码规范、文档规范、测试标准更新时，AI Agent 运维管理员需及时更新对应 Agent（如前端、后端、测试 Agent）的配置参数，同步开展 Agent 校准测试，确保所有 Agent 辅助效果符合最新要求。

### 9.3 Agent 运行监控与故障处理

AI Agent 运维管理员负责监控 7 类 AI Agent 的运行状态，建立 Agent 运行日志归档机制，发现任意 Agent 运行异常（如卡顿、误判、无法触发任务）时，及时排查故障、修复问题；无法立即修复的，暂停该 Agent 协作，切换为人工主导或其他协同 Agent 辅助，避免影响项目进度，留存 Agent 故障处理记录。

### 9.4 Agent 数据安全管理

7 类 AI Agent 在协作过程中接触的项目代码、核心数据、测试用例等敏感信息，需进行加密处理；所有 Agent 生成的中间文件、日志需同步归档，禁止泄露；项目结束后，AI Agent 运维管理员需清理所有 Agent 缓存中的敏感数据，留存数据清理记录，确保数据安全。

---

## 10. AI Agent 协作机制与工作流编排规范

### 10.1 主 Agent 核心能力定义

主 Agent 是整个 AI Agent 协作体系的调度中枢，需具备以下三大核心能力：

#### 1. 精准的任务拆解能力

主 Agent 能够将复杂项目需求拆解为颗粒度合适的任务节点，每个节点需明确"要做什么、输入啥、输出啥"，输出节点清单应包含以下关键信息：

- 节点 ID：唯一标识符
- 任务描述：详细说明任务内容
- 输入字段：所需输入数据
- 输出格式：预期输出格式
- 依赖关系：与其他节点的依赖关系
- 责任人：人工或专项 Agent

拆解时需遵循"最小必要"原则，避免冗余节点，每个节点应有明确可交付的产出物。

#### 2. 智能的提示词定制能力

主 Agent 能够根据节点任务类型，从模板库调取框架并填充专属要求，针对不同类型节点采用差异化策略：

- **数据处理节点**：强调逻辑严谨与边界校验
- **代码生成节点**：强调规范与可执行性
- **文档编写节点**：侧重表达风格与格式规范

每个节点提示词需包含以下要素：

- 角色定义
- 任务指令
- 输出规范
- 校验标准
- 上下文引用

#### 3. 动态的工作流编排能力

主 Agent 能够判断节点间的依赖关系，识别哪些节点可并行执行、哪些需串行等待，动态调整执行顺序；支持条件分支与循环逻辑，能够根据前序节点执行结果智能路由至后续节点，具备异常处理与回退机制，确保工作流稳定推进。

### 10.2 Agent 协作规则（结果传递与状态标记）

多 Agent 协同需严格遵循"结果传递 + 状态标记"原则，确保信息准确流转、责任清晰可追溯：

#### 1. 结果标准化输出

每个 Agent 完成任务后，需按照主 Agent 定义的输出规范生成结构化结果，包含以下字段：

- 核心结论
- 过程数据
- 置信度评分
- 待办建议

结果格式统一为主 Agent 指定的 JSON 或 Markdown 格式，禁止输出非结构化描述。

#### 2. 状态标记机制

前序节点输出结果后，需自动为结果打上状态标签，状态标签分为四种：

| 状态标签 | 含义 |
|---------|------|
| 待校验 | 结果已生成，需等待人工或下游 Agent 校验 |
| 已校验通过 | 结果经校验确认无误，可流转至下游节点 |
| 需修订 | 结果存在问题，需返回修改后重新输出 |
| 已废弃 | 结果因需求变更或流程调整而失效 |

#### 3. 结果传递规范

节点间传递结果时，只附带上一节点的以下信息：

- 核心结论
- 标签状态
- 关键上下文

传递时需明确标注：

- 源节点 ID
- 目标节点 ID
- 传递时间戳

确保全链路可追溯，禁止传递完整中间文件以减少下游处理负担。

#### 4. 卡点识别与移交机制

若某 Agent 节点在执行过程中遇到无法自主解决的问题（如需求模糊、技术边界不清、依赖未就绪），需立即输出"需移交"信号，包含以下信息：

- 卡点类型
- 已尝试方案
- 阻塞原因
- 建议处理方式

主 Agent 收到信号后，根据卡点类型动态生成新的定制提示词，派出专项 Agent 节点接手处理，原节点暂停等待结果。

#### 5. 异常处理规则

节点执行异常时，需立即输出异常报告，包含以下内容：

- 异常类型
- 堆栈信息
- 影响范围
- 恢复建议

主 Agent 根据异常级别决定是重试、回退还是人工介入，异常信息需同步推送至相关责任人和 Agent 运维管理员。

### 10.3 工作流编排规范

主 Agent 在编排工作流时，需遵循以下规范确保执行效率与质量：

#### 1. 依赖关系识别

工作流编排前，主 Agent 需全面分析节点间的数据依赖和控制依赖，明确前置条件与后置产出，生成依赖关系图；串行节点需确保前序完成后才触发并行节点，并行节点间需定义同步汇合点。

#### 2. 并行优化策略

识别无依赖关系的节点（如独立模块开发、无数据交叉的测试用例），优先安排并行执行以提升整体效率；并行执行时需设置资源上限与超时控制，避免资源竞争与无限等待。

#### 3. 执行顺序动态调整

主 Agent 需实时监控各节点执行状态，根据结果质量、阻塞情况动态调整后续节点顺序；如某节点输出质量不达标，可插入质检节点优先校验，避免错误扩散至下游。

#### 4. 回滚与恢复机制

工作流需支持检查点与回滚能力，当某节点执行失败或结果需修订时，能够回退至最近检查点重新执行；回滚时需自动清理已产生但未归档的中间数据，确保环境一致性。

#### 5. 进度追踪与可视化

主 Agent 需维护工作流执行进度看板，实时展示以下指标：

- 各节点状态（待执行、执行中、已完成、阻塞、失败）
- 执行时间
- 资源消耗

进度信息需同步推送至技术负责人与相关 Agent，支持异常快速响应。

### 10.4 节点 Agent 交互协议

为确保不同类型 Agent 之间的顺畅协作，需定义统一的交互协议：

#### 1. 消息格式标准

Agent 间消息统一采用 JSON 格式，包含以下字段：

- 消息 ID：唯一标识
- 发送方 Agent 类型
- 接收方 Agent 类型
- 消息类型：任务、分发、结果、告警、请求
- 消息内容
- 时间戳
- 签名校验

消息需加密传输，确保信息安全。

#### 2. 任务分发协议

主 Agent 向节点 Agent 分发任务时，需包含以下要素：

- 任务 ID
- 任务类型
- 输入数据
- 输出规范
- 超时时间
- 重试次数
- 回调地址

节点 Agent 接收后需在规定时间内返回确认或异常反馈。

#### 3. 结果提交通知

节点 Agent 完成任务后，需向主 Agent 提交结果，内容包括：

- 任务 ID
- 执行状态
- 核心结论
- 详细输出
- 置信度评分
- 待办建议

主 Agent 收到结果后更新工作流状态并触发下游节点。

#### 4. 告警与告警处理

节点 Agent 在执行过程中遇到异常，需立即向主 Agent 发送告警消息，包含以下信息：

- 告警级别：致命、严重、一般、提示
- 告警类型
- 影响范围
- 建议处理措施

主 Agent 根据告警级别触发相应处理流程。

#### 5. 心跳与存活检测

节点 Agent 需定期向主 Agent 发送心跳信号，报告当前状态与资源使用情况；主 Agent 若在规定时间内未收到心跳，需判定 Agent 可能异常，触发检查与恢复流程。

### 10.5 Agent 协作配置与模板库

为提升主 Agent 编排效率与一致性，需建设 Agent 协作配置与模板库：

#### 1. 节点模板库

预置各类常见任务节点的提示词模板：

- 需求分析节点
- 代码生成节点
- 测试用例节点
- 文档编写节点
- 部署执行节点

模板支持参数化定制，主 Agent 可根据实际任务填充具体要求。

#### 2. 工作流模板库

预置项目开发标准工作流模板：

- 需求管理项目开发流程
- bug 修复流程
- 功能迭代流程

包含节点组合、依赖关系、执行顺序、校验规则等；主 Agent 可基于模板快速编排新工作流，仅需调整差异化部分。

#### 3. 协作规则库

预置 Agent 间协作规则配置：

- 状态标记规则
- 结果传递格式
- 超时阈值
- 重试策略
- 告警级别定义

协作规则需与主 Agent 协作规则章节保持一致，确保执行一致性。

#### 4. 上下文管理策略

主 Agent 需维护全局上下文，包含以下信息：

- 项目基本信息
- 当前工作流状态
- 已验证结论
- 共享知识库

上下文需支持增量更新与版本管理，确保所有节点 Agent 访问到最新、最准确的信息。

### 10.6 协作效果评估与持续优化

为确保 Agent 协作机制持续有效，需建立协作效果评估体系：

#### 1. 执行效率指标

统计以下指标，识别瓶颈节点与优化空间：

- 工作流整体执行时间
- 各节点执行时间
- 并行度
- 资源利用率

定期对比优化前后的执行效率数据，评估优化效果。

#### 2. 结果质量指标

统计以下指标，评估 Agent 输出质量：

- 一次通过率
- 缺陷逃逸率
- 人工修订比例

针对低质量节点分析原因，调整提示词模板或协作规则。

#### 3. 协作顺畅度指标

统计以下指标，评估 Agent 间协作顺畅程度：

- 节点间移交成功率
- 卡点处理时长
- 异常恢复时长

针对协作异常分析根因，完善交互协议与协作规则。

#### 4. 持续优化机制

基于评估数据，定期组织 Agent 运维管理员、技术负责人开展协作效果评审，识别改进点并更新协作规则库、节点模板库；建立 Agent 协作最佳实践案例库，沉淀成功经验供后续项目复用。
